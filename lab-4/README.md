# ЛР4 — Weather App

> [!IMPORTANT]
> Работа выполнена **на чистом JavaScript (DOM API)**, без фреймворков.  
> Разметка страницы задаётся в HTML, а **весь динамический контент** (список городов, карточки прогноза, skeleton, детали дня, кнопки управления) создаётся и обновляется через JS (`createElement`, `appendChild`, `textContent`, `className`, `setAttribute`).

## Оглавление
1. [Кратко о работе](#кратко-о-работе)  
2. [Страница](#страница)  
3. [Что требовалось по заданию](#что-требовалось-по-заданию)  
4. [Функционал](#функционал)  
5. [Технологии](#технологии)  

---

## Кратко о работе
Веб-приложение «Погода»: определение текущего местоположения через **Geolocation API**, добавление городов вручную через каталог, выбор активной локации, загрузка прогноза с **open-meteo**, отображение прогноза на несколько дней, “Load more”, детальная информация по дню, сохранение состояния в `localStorage`.  
Реализованы избранные города (★/☆) и ограничение списка городов с кнопкой **«Показать ещё / Свернуть»**.

---

## Страница
- Главная страница работ: **https://nicolasraa.github.io/Web-programming/**
- ЛР4 (Weather App): **https://nicolasraa.github.io/Web-programming/lab-4/**

---

## Что требовалось по заданию

### Задача
- При первом открытии приложения запрашивается доступ к геопозиции пользователя и выводится прогноз **на сегодня и минимум на 2 следующих дня**.  
  В интерфейсе локация отображается как **«Текущее местоположение»**.
- При отклонении доступа к геоданным пользователю показывается форма добавления города для получения прогноза (с теми же требованиями).
- Пользователь может добавить **как минимум 2 других города** для получения прогноза в них.
- В интерфейсе есть кнопка **«Обновить»**, по которой выполняются **новые HTTP-запросы** за погодой (перезагрузка страницы не считается).
- При перезагрузке приложения сохраняются: текущая локация (гео или вручную введённый город) и все дополнительные города.

### Технические требования
> [!WARNING]
> Запрещено использовать CSS-фреймворки (Bootstrap, Foundation и т.п.) и JS-фреймворки (Angular, React, Vue и т.п.).  
> Разрешены CSS-препроцессоры (например, SCSS) по желанию.

### Этапы разработки
- **Макет и верстка**
  - Базовая HTML-страница и контейнеры для вывода погоды.
  - Адаптивность через медиазапросы: корректное отображение на mobile/desktop без наложения элементов.
- **Логика**
  - Получение прогноза выполняется через **HTTP-запросы** (`fetch`).
  - Корректная обработка состояний интерфейса: **загрузка / ошибка / успех**.
  - При вводе города — **выпадающий список**; можно захардкодить или получить из бесплатного API.
  - Можно добавлять только существующие города; при ошибке показывается сообщение **под полем ввода**.
  - Данные пользователя сохраняются при обновлении страницы (`localStorage`), но **запросы погоды выполняются заново**.

---

## Функционал
- **Геолокация**
  - Запрос координат через `navigator.geolocation.getCurrentPosition`.
  - Состояния: `idle / pending / allowed / denied / unsupported`.
  - Если доступ отклонён — появляется кнопка **«Запросить геолокацию»** (повторный запрос).
- **Города**
  - Поле ввода + выпадающие подсказки из каталога (из `cities.js`).
  - Кнопка **«Показать»** открывает список даже при пустом инпуте.
  - Валидация: пустой ввод / город не найден / дубликаты (основной или уже добавлен).
  - **Основная локация** (гео или выбранный город) + **дополнительные города**.
  - Удаление дополнительных городов.
- **Избранное (extra cities)**
  - Переключатель ★/☆ только для дополнительных городов.
  - Лимит избранных: **максимум 3** (с сообщением в статус-панели).
  - Избранные автоматически поднимаются вверх списка.
- **Список городов: “Показать ещё / Свернуть”**
  - Если локаций больше **12** (main + extra), отображается кнопка:
    - **«Показать ещё N ▼»** (раскрыть)
    - **«Свернуть ▲»** (свернуть)
  - В свернутом режиме показываются первые 12 (если есть main — он занимает 1 слот).
- **Прогноз погоды**
  - HTTP-запрос к **open-meteo** по координатам выбранной локации.
  - UI по умолчанию показывает **3 дня**, но данные запрашиваются расширенно (до 10 дней) для режима “Load more”.
  - Заголовок прогноза обновляется **только после успешной загрузки** для текущего выбора.
- **Skeleton loading**
  - Во время загрузки отображаются skeleton-карточки вместо старого прогноза.
- **Load more**
  - Кнопка **«Показать ещё ... дн.»** добавляет дни шагом по 3 с имитацией задержки (loading).
- **Детали дня**
  - Клик по карточке дня открывает панель деталей: осадки, вероятность, ветер, порывы, направление, UV, восход/закат.
  - Повторный клик по тому же дню закрывает детали.
  - Поддержка клавиатуры: **Enter / Space**.
- **Сохранение состояния**
  - `localStorage`: основной/доп. города, текущий выбор, статус геолокации, избранные.
  - При перезагрузке состояние восстанавливается.

---

## Технологии
- **JavaScript** (DOM API, события, `fetch`, `localStorage`, Geolocation API)
- **CSS** (адаптивные стили; без фреймворков)
- **HTML5** (страница-оболочка + подключение скриптов)
- **Open-Meteo API** (прогноз погоды через HTTP-запросы)

> Деплой выполнен с помощью **GitHub Pages**.
